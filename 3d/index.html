<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D –ú–æ–¥–µ–ª—å —Å –ø–æ–ª–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            margin: 20px 0 30px 0;
            color: white;
            width: 100%;
            max-width: 800px;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            width: 100%;
            max-width: 1000px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        /* –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–æ–¥–µ–ª–∏ */
        .model-wrapper {
            position: relative;
            width: 100%;
            height: 70vh;
            min-height: 500px;
            background: #000;
            border-radius: 20px 20px 0 0;
            overflow: hidden;
        }
        
        model-viewer {
            width: 100%;
            height: 100%;
            --poster-color: transparent;
            --progress-bar-color: #2575fc;
            --progress-bar-height: 4px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls-overlay {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            border-radius: 50px;
            z-index: 100;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            user-select: none;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        
        .control-btn:active {
            transform: scale(0.95);
        }
        
        .control-btn.active {
            background: #2575fc;
            box-shadow: 0 0 15px rgba(37, 117, 252, 0.5);
        }
        
        .control-btn.large {
            width: 60px;
            height: 60px;
            font-size: 28px;
        }
        
        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π */
        .instructions-panel {
            background: white;
            padding: 25px 30px;
            border-top: 1px solid #eee;
        }
        
        .instructions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 15px;
        }
        
        .instruction-card {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid #2575fc;
        }
        
        .instruction-card h3 {
            color: #2575fc;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instruction-card ul {
            list-style: none;
            padding-left: 0;
        }
        
        .instruction-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
        }
        
        .instruction-card li:before {
            content: "‚Ä¢";
            color: #2575fc;
            font-weight: bold;
            margin-right: 10px;
            font-size: 20px;
        }
        
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .touch-hints {
            position: absolute;
            top: 20px;
            left: 20px;
            display: none;
            gap: 10px;
            z-index: 90;
        }
        
        .touch-hint {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(5px);
        }
        
        /* –ü–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ */
        .upload-section {
            background: linear-gradient(to right, #f8f9ff, #ffffff);
            padding: 25px;
            text-align: center;
            border-top: 1px solid #eee;
        }
        
        .file-input-wrapper {
            position: relative;
            display: inline-block;
            margin: 20px 0;
        }
        
        .file-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-label {
            display: inline-block;
            padding: 15px 40px;
            background: linear-gradient(to right, #2575fc, #6a11cb);
            color: white;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(37, 117, 252, 0.3);
        }
        
        .file-label:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(37, 117, 252, 0.4);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .model-wrapper {
                height: 60vh;
                min-height: 400px;
                border-radius: 15px 15px 0 0;
            }
            
            .controls-overlay {
                padding: 12px 20px;
                gap: 10px;
                bottom: 15px;
            }
            
            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            
            .control-btn.large {
                width: 50px;
                height: 50px;
            }
            
            .touch-hints {
                display: flex;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .model-wrapper {
                height: 50vh;
                min-height: 350px;
            }
            
            .controls-overlay {
                padding: 10px 15px;
                gap: 8px;
            }
            
            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .control-btn.large {
                width: 45px;
                height: 45px;
            }
            
            .instructions-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 200;
            color: white;
            text-align: center;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #2575fc;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */
        .error-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 59, 48, 0.9);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            z-index: 200;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        /* GitHub Pages —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        .github-tip {
            background: #24292e;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ 3D –ú–æ–¥–µ–ª—å —Å –ø–æ–ª–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º</h1>
        <p class="subtitle">–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ GitHub Pages ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ü–ö –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–µ ‚Ä¢ –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ—é –º–æ–¥–µ–ª—å</p>
    </div>
    
    <div class="container">
        <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <h3>–ó–∞–≥—Ä—É–∂–∞–µ–º 3D –º–æ–¥–µ–ª—å...</h3>
            <p id="progress-text">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥–µ–ª–∏ -->
        <div class="model-wrapper">
            <!-- 3D –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ -->
            <model-viewer
                id="model-viewer"
                src=""
                alt="3D –ú–æ–¥–µ–ª—å"
                ar
                ar-modes="webxr scene-viewer quick-look"
                environment-image="neutral"
                shadow-intensity="1"
                camera-controls
                auto-rotate
                camera-orbit="0deg 75deg 105%"
                field-of-view="45deg"
                interaction-policy="allow-when-focused"
                touch-action="pan-y"
                style="width: 100%; height: 100%;"
            >
            </model-viewer>
            
            <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
            <div class="touch-hints" id="touch-hints">
                <div class="touch-hint">üëÜ –û–¥–∏–Ω –ø–∞–ª–µ—Ü - –≤—Ä–∞—â–µ–Ω–∏–µ</div>
                <div class="touch-hint">‚úåÔ∏è –î–≤–∞ –ø–∞–ª—å—Ü–∞ - –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            </div>
            
            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="controls-overlay">
                <button class="control-btn large" id="rotate-btn" title="–í–∫–ª—é—á–∏—Ç—å –≤—Ä–∞—â–µ–Ω–∏–µ">
                    üîÑ
                </button>
                <button class="control-btn" id="reset-btn" title="–°–±—Ä–æ—Å–∏—Ç—å –≤–∏–¥">
                    üè†
                </button>
                <button class="control-btn" id="zoom-in-btn" title="–ü—Ä–∏–±–ª–∏–∑–∏—Ç—å">
                    üîç+
                </button>
                <button class="control-btn" id="zoom-out-btn" title="–û—Ç–¥–∞–ª–∏—Ç—å">
                    üîç-
                </button>
                <button class="control-btn" id="ar-btn" title="AR-—Ä–µ–∂–∏–º">
                    üëÅÔ∏è
                </button>
                <button class="control-btn" id="fullscreen-btn" title="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω">
                    ‚õ∂
                </button>
            </div>
        </div>
        
        <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π -->
        <div class="instructions-panel">
            <h2>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—å—é</h2>
            <div class="instructions-grid">
                <div class="instruction-card">
                    <h3>üñ±Ô∏è –î–ª—è –ü–ö (–∫–æ–º–ø—å—é—Ç–µ—Ä)</h3>
                    <ul>
                        <li><strong>–í—Ä–∞—â–µ–Ω–∏–µ:</strong> –õ–ö–ú + –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏</li>
                        <li><strong>–ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ:</strong> –ö–æ–ª–µ—Å–∏–∫–æ –º—ã—à–∏ –≤–ø–µ—Ä–µ–¥</li>
                        <li><strong>–û—Ç–¥–∞–ª–µ–Ω–∏–µ:</strong> –ö–æ–ª–µ—Å–∏–∫–æ –º—ã—à–∏ –Ω–∞–∑–∞–¥</li>
                        <li><strong>–ü–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –ü–ö–ú + –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏</li>
                        <li><strong>–ë—ã—Å—Ç—Ä—ã–π —Å–±—Ä–æ—Å:</strong> –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ –º–æ–¥–µ–ª–∏</li>
                    </ul>
                </div>
                
                <div class="instruction-card">
                    <h3>üì± –î–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞/–ø–ª–∞–Ω—à–µ—Ç–∞</h3>
                    <ul>
                        <li><strong>–í—Ä–∞—â–µ–Ω–∏–µ:</strong> –û–¥–∏–Ω –ø–∞–ª–µ—Ü + –¥–≤–∏–∂–µ–Ω–∏–µ</li>
                        <li><strong>–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –î–≤–∞ –ø–∞–ª—å—Ü–∞ + —Ä–∞–∑–¥–≤–∏–∂–µ–Ω–∏–µ/—Å–¥–≤–∏–≥</li>
                        <li><strong>–ü–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –î–≤–∞ –ø–∞–ª—å—Ü–∞ + –¥–≤–∏–∂–µ–Ω–∏–µ</li>
                        <li><strong>–ë—ã—Å—Ç—Ä—ã–π —Å–±—Ä–æ—Å:</strong> –î–≤–æ–π–Ω–æ–µ –∫–∞—Å–∞–Ω–∏–µ</li>
                        <li><strong>AR-—Ä–µ–∂–∏–º:</strong> –ö–Ω–æ–ø–∫–∞ üëÅÔ∏è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–∞–º–µ—Ä–∞)</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –¥–ª—è GitHub Pages -->
        <div class="upload-section">
            <h2>üìÅ –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –Ω–∞ GitHub Pages</h2>
            <p>–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ GitHub Pages:</p>
            
            <div class="github-tip">
                <strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:</strong><br>
                your-repo/<br>
                ‚îú‚îÄ‚îÄ index.html (—ç—Ç–æ—Ç —Ñ–∞–π–ª)<br>
                ‚îú‚îÄ‚îÄ model/<br>
                ‚îÇ   ‚îî‚îÄ‚îÄ your-model.glb (–≤–∞—à–∞ –º–æ–¥–µ–ª—å)<br>
                ‚îî‚îÄ‚îÄ README.md
            </div>
            
            <div class="file-input-wrapper">
                <input type="file" id="file-input" class="file-input" accept=".glb,.gltf">
                <label for="file-input" class="file-label">
                    üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å (.glb/.gltf)
                </label>
            </div>
            <p id="file-status" style="margin-top: 10px; color: #666;">
                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50 –ú–ë
            </p>
        </div>
    </div>
    
    <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div style="background: white; border-radius: 15px; padding: 25px; margin-top: 20px; max-width: 1000px; width: 100%;">
        <h3>üîß –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</h3>
        <p>–ï—Å–ª–∏ –≤–∞—à–∞ –º–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é:</p>
        <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
            <button id="test-duck" class="control-btn" style="background: #4CAF50; color: white; width: auto; padding: 0 20px;">
                ü¶Ü –¢–µ—Å—Ç: –£—Ç–∫–∞
            </button>
            <button id="test-sphere" class="control-btn" style="background: #2196F3; color: white; width: auto; padding: 0 20px;">
                üîµ –¢–µ—Å—Ç: –°—Ñ–µ—Ä–∞
            </button>
            <button id="test-cube" class="control-btn" style="background: #FF9800; color: white; width: auto; padding: 0 20px;">
                üßä –¢–µ—Å—Ç: –ö—É–±
            </button>
        </div>
    </div>

    <script>
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================
        const CONFIG = {
            // –¢–µ—Å—Ç–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
            TEST_MODELS: {
                'duck': 'https://cdn.glitch.me/3b0b6a5a-5c5e-4b5e-8b0a-0e9d9b9b9b9b/Duck.glb',
                'sphere': 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Sphere/glTF/Sphere.gltf',
                'cube': 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Box/glTF/Box.gltf'
            },
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —ç—Ç–∏ –ø—É—Ç–∏ –¥–ª—è –º–æ–¥–µ–ª–∏
            MODEL_PATHS: [
                'model.glb',
                'model/model.glb',
                'assets/model.glb',
                '3d/model.glb',
                'models/model.glb'
            ]
        };

        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        const modelViewer = document.querySelector('#model-viewer');
        const loadingElement = document.getElementById('loading');
        const progressText = document.getElementById('progress-text');
        const fileInput = document.getElementById('file-input');
        const fileStatus = document.getElementById('file-status');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        const rotateBtn = document.getElementById('rotate-btn');
        const resetBtn = document.getElementById('reset-btn');
        const zoomInBtn = document.getElementById('zoom-in-btn');
        const zoomOutBtn = document.getElementById('zoom-out-btn');
        const arBtn = document.getElementById('ar-btn');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const touchHints = document.getElementById('touch-hints');

        // ==================== –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø ====================
        
        // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç–∞
        rotateBtn.addEventListener('click', () => {
            const isRotating = modelViewer.getAttribute('auto-rotate') === '';
            modelViewer.setAttribute('auto-rotate', !isRotating);
            rotateBtn.classList.toggle('active', !isRotating);
            rotateBtn.title = !isRotating ? '–í—Ä–∞—â–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ' : '–í–∫–ª—é—á–∏—Ç—å –≤—Ä–∞—â–µ–Ω–∏–µ';
        });

        // –°–±—Ä–æ—Å –≤–∏–¥–∞ –∫ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–º—É
        resetBtn.addEventListener('click', () => {
            modelViewer.cameraOrbit = '0deg 75deg 105%';
            modelViewer.fieldOfView = '45deg';
            modelViewer.jumpCameraToGoal();
            showNotification('–í–∏–¥ —Å–±—Ä–æ—à–µ–Ω');
        });

        // –ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ
        zoomInBtn.addEventListener('click', () => {
            const currentFov = parseFloat(modelViewer.fieldOfView);
            if (currentFov > 10) {
                modelViewer.fieldOfView = `${currentFov - 5}deg`;
            }
        });

        // –û—Ç–¥–∞–ª–µ–Ω–∏–µ
        zoomOutBtn.addEventListener('click', () => {
            const currentFov = parseFloat(modelViewer.fieldOfView);
            if (currentFov < 90) {
                modelViewer.fieldOfView = `${currentFov + 5}deg`;
            }
        });

        // AR —Ä–µ–∂–∏–º
        arBtn.addEventListener('click', () => {
            if (modelViewer.activateAR) {
                modelViewer.activateAR();
            } else {
                showNotification('AR –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ', 'warning');
            }
        });

        // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
        fullscreenBtn.addEventListener('click', () => {
            const modelWrapper = document.querySelector('.model-wrapper');
            if (!document.fullscreenElement) {
                if (modelWrapper.requestFullscreen) {
                    modelWrapper.requestFullscreen();
                } else if (modelWrapper.webkitRequestFullscreen) {
                    modelWrapper.webkitRequestFullscreen();
                } else if (modelWrapper.msRequestFullscreen) {
                    modelWrapper.msRequestFullscreen();
                }
                showNotification('–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω');
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        });

        // ==================== –ó–ê–ì–†–£–ó–ö–ê –ú–û–î–ï–õ–ï–ô ====================
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –º–æ–¥–µ–ª–∏
        document.getElementById('test-duck').addEventListener('click', () => loadModel(CONFIG.TEST_MODELS.duck, '–£—Ç–∫–∞'));
        document.getElementById('test-sphere').addEventListener('click', () => loadModel(CONFIG.TEST_MODELS.sphere, '–°—Ñ–µ—Ä–∞'));
        document.getElementById('test-cube').addEventListener('click', () => loadModel(CONFIG.TEST_MODELS.cube, '–ö—É–±'));

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
        function loadModel(src, name = '–ú–æ–¥–µ–ª—å') {
            showLoading(`–ó–∞–≥—Ä—É–∂–∞–µ–º ${name}...`);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
            modelViewer.src = src;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
            if (isTouchDevice()) {
                touchHints.style.display = 'flex';
                setTimeout(() => {
                    touchHints.style.display = 'none';
                }, 5000);
            }
        }

        // ==================== –û–ë–†–ê–ë–û–¢–ö–ê –°–û–ë–´–¢–ò–ô ====================
        
        // –°–æ–±—ã—Ç–∏–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
        modelViewer.addEventListener('load', () => {
            console.log('‚úÖ –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
            hideLoading();
            
            // –í–∫–ª—é—á–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π
            modelViewer.setAttribute('camera-controls', '');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification('–ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º—ã—à—å/–ø–∞–ª—å—Ü—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è');
        });

        // –°–æ–±—ã—Ç–∏–µ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
        modelViewer.addEventListener('error', (event) => {
            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', event.detail);
            
            // –ü—Ä–æ–±—É–µ–º –¥—Ä—É–≥–∏–µ –ø—É—Ç–∏
            tryAlternativePaths();
        });

        // –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
        modelViewer.addEventListener('progress', (event) => {
            const progress = Math.floor(event.detail.totalProgress * 100);
            progressText.textContent = `–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏: ${progress}%`;
        });

        // ==================== –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –ü–£–¢–ò –î–õ–Ø GITHUB PAGES ====================
        
        function tryAlternativePaths() {
            let currentIndex = 0;
            
            function tryNextPath() {
                if (currentIndex >= CONFIG.MODEL_PATHS.length) {
                    // –í—Å–µ –ø—É—Ç–∏ –ø–µ—Ä–µ–ø—Ä–æ–±–æ–≤–∞–Ω—ã
                    showError('–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –º–æ–¥–µ–ª—å. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å.');
                    return;
                }
                
                const path = CONFIG.MODEL_PATHS[currentIndex];
                progressText.textContent = `–ü—Ä–æ–±—É–µ–º –ø—É—Ç—å: ${path}`;
                
                // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å
                fetch(path)
                    .then(response => {
                        if (response.ok) {
                            loadModel(path);
                        } else {
                            currentIndex++;
                            setTimeout(tryNextPath, 1000);
                        }
                    })
                    .catch(() => {
                        currentIndex++;
                        setTimeout(tryNextPath, 1000);
                    });
            }
            
            tryNextPath();
        }

        // ==================== –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í –° –ö–û–ú–ü–¨–Æ–¢–ï–†–ê ====================
        
        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (!file) return;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞
            if (file.size > 50 * 1024 * 1024) {
                showError('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ú–∞–∫—Å–∏–º—É–º 50 –ú–ë');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞
            if (!file.name.toLowerCase().endsWith('.glb') && !file.name.toLowerCase().endsWith('.gltf')) {
                showError('–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã .glb –∏ .gltf');
                return;
            }
            
            fileStatus.textContent = `–ó–∞–≥—Ä—É–∂–∞–µ–º: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} –ú–ë)`;
            showLoading(`–ó–∞–≥—Ä—É–∂–∞–µ–º ${file.name}...`);
            
            // –°–æ–∑–¥–∞–µ–º URL –¥–ª—è —Ñ–∞–π–ª–∞
            const objectURL = URL.createObjectURL(file);
            loadModel(objectURL, file.name);
        });

        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        
        function showLoading(message) {
            loadingElement.style.display = 'flex';
            progressText.textContent = message;
        }
        
        function hideLoading() {
            loadingElement.style.display = 'none';
        }
        
        function showError(message) {
            hideLoading();
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 15px;">‚ùå</div>
                <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                <p>${message}</p>
                <div style="margin-top: 20px;">
                    <button onclick="this.parentElement.parentElement.remove(); location.reload();" 
                            style="background: white; color: #ff3b30; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: bold;">
                        –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                    </button>
                </div>
            `;
            
            document.querySelector('.model-wrapper').appendChild(errorDiv);
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'warning' ? '#ff9800' : '#4CAF50'};
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        function isTouchDevice() {
            return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
        if (isTouchDevice()) {
            document.body.classList.add('touch-device');
        }

        // –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3D –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞...');
            
            // –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –º–æ–¥–µ–ª—å –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –ø—É—Ç—è–º
            setTimeout(() => {
                if (!modelViewer.src) {
                    tryAlternativePaths();
                }
            }, 2000);
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∂–µ—Å—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        let touchStartDistance = 0;
        
        document.querySelector('.model-wrapper').addEventListener('touchstart', (e) => {
            if (e.touches.length === 2) {
                touchStartDistance = Math.hypot(
                    e.touches[0].pageX - e.touches[1].pageX,
                    e.touches[0].pageY - e.touches[1].pageY
                );
            }
        });
        
        document.querySelector('.model-wrapper').addEventListener('touchmove', (e) => {
            if (e.touches.length === 2 && e.changedTouches.length === 2) {
                const currentDistance = Math.hypot(
                    e.touches[0].pageX - e.touches[1].pageX,
                    e.touches[0].pageY - e.touches[1].pageY
                );
                
                // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
                if (touchStartDistance > 0) {
                    const scaleChange = currentDistance / touchStartDistance;
                    if (scaleChange > 1.1 || scaleChange < 0.9) {
                        const currentFov = parseFloat(modelViewer.fieldOfView);
                        const newFov = currentFov / scaleChange;
                        
                        if (newFov > 10 && newFov < 90) {
                            modelViewer.fieldOfView = `${newFov}deg`;
                        }
                        
                        touchStartDistance = currentDistance;
                    }
                }
            }
        });
    </script>

    <div style="color: white; text-align: center; margin-top: 30px; padding: 20px; max-width: 800px;">
        <p><strong>–î–ª—è GitHub Pages:</strong></p>
        <p style="font-size: 0.9rem; opacity: 0.8;">
            1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –∫–∞–∫ <code>index.html</code><br>
            2. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É <code>model</code> –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ —Ç—É–¥–∞ –≤–∞—à—É –º–æ–¥–µ–ª—å –∫–∞–∫ <code>model.glb</code><br>
            3. –í–∫–ª—é—á–∏—Ç–µ GitHub Pages –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        </p>
    </div>
</body>
</html>
