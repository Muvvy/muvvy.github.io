<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D –ú–æ–¥–µ–ª—å - –†–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 1200px;
            margin-bottom: 30px;
        }
        
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 500px;
            background: #f5f5f5;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #ddd;
            border-top: 6px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .model-viewer-container {
            width: 100%;
            height: 600px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            position: relative;
        }
        
        model-viewer {
            width: 100%;
            height: 100%;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(to right, #667eea, #764ba2);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.reset {
            background: linear-gradient(to right, #ff5e62, #ff9966);
        }
        
        .btn.ar {
            background: linear-gradient(to right, #00b09b, #96c93d);
        }
        
        .instructions {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 5px solid #667eea;
        }
        
        .instructions h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions ul {
            list-style: none;
            padding-left: 0;
        }
        
        .instructions li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .instructions li:before {
            content: "‚Üí";
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .error {
            background: #fff5f5;
            border: 2px solid #fed7d7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            color: #c53030;
        }
        
        .troubleshooting {
            background: #fff8e1;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px dashed #ffb300;
        }
        
        .test-model-section {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            text-align: center;
        }
        
        .file-upload {
            margin: 20px 0;
            padding: 20px;
            border: 2px dashed #667eea;
            border-radius: 10px;
            background: #f8f9ff;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .model-viewer-container {
                height: 400px;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéÆ 3D –ú–æ–¥–µ–ª—å –Ω–∞ —Å–∞–π—Ç–µ</h1>
        <p>–ü—Ä–æ—Å—Ç–æ–π –∏ —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ 3D –º–æ–¥–µ–ª–µ–π</p>
    </div>
    
    <div class="container">
        <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <h3>–ó–∞–≥—Ä—É–∂–∞–µ–º 3D –º–æ–¥–µ–ª—å...</h3>
            <p id="progress-text">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞</p>
            <p style="color: #666; margin-top: 20px; max-width: 500px; text-align: center;">
                –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –¥–æ–ª–≥–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å –Ω–∏–∂–µ
            </p>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ -->
        <div class="model-viewer-container">
            <model-viewer
                id="my-model-viewer"
                src=""  <!-- –ü—É—Å—Ç–æ–π src - –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–º –µ–≥–æ —á–µ—Ä–µ–∑ JS -->
                alt="3D –º–æ–¥–µ–ª—å"
                ar
                ar-modes="webxr scene-viewer quick-look"
                environment-image="neutral"
                shadow-intensity="1"
                camera-controls
                auto-rotate
                exposure="1"
                style="display: none;"
            >
                <div class="controls" slot="controls">
                    <button class="btn" onclick="toggleAutoRotate()">
                        <span id="rotate-icon">üîÑ</span>
                        <span id="rotate-text">–í—Ä–∞—â–µ–Ω–∏–µ</span>
                    </button>
                    <button class="btn reset" onclick="resetView()">
                        üè† –°–±—Ä–æ—Å–∏—Ç—å
                    </button>
                    <button class="btn" onclick="toggleShadow()">
                        <span id="shadow-icon">üåì</span>
                        <span id="shadow-text">–¢–µ–Ω–∏</span>
                    </button>
                    <button class="btn ar" onclick="enterAR()">
                        üëÅÔ∏è AR
                    </button>
                </div>
            </model-viewer>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="controls">
            <button class="btn" onclick="changeEnvironment('neutral')">
                üèôÔ∏è –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ
            </button>
            <button class="btn" onclick="changeEnvironment('legacy')">
                üèõÔ∏è –ö–ª–∞—Å—Å–∏–∫–∞
            </button>
            <button class="btn" onclick="changeEnvironment('spruit-sunrise')">
                üåÖ –†–∞—Å—Å–≤–µ—Ç
            </button>
            <button class="btn" onclick="downloadModel()">
                ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å
            </button>
        </div>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
        <div class="instructions">
            <h3>üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</h3>
            <ul>
                <li><strong>–í—Ä–∞—â–µ–Ω–∏–µ:</strong> –õ–ö–ú + –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏</li>
                <li><strong>–ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ:</strong> –ö–æ–ª–µ—Å–∏–∫–æ –º—ã—à–∏</li>
                <li><strong>–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ:</strong> –ü–ö–ú + –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏</li>
                <li><strong>AR:</strong> –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É AR (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞—Ö)</li>
            </ul>
        </div>
        
        <!-- –¢–µ—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å -->
        <div class="test-model-section">
            <h3>üîß –¢–µ—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å</h3>
            <p>–ï—Å–ª–∏ –≤–∞—à–∞ –º–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —ç—Ç—É:</p>
            <div class="controls">
                <button class="btn" onclick="loadTestModel('duck')">
                    ü¶Ü –¢–µ—Å—Ç–æ–≤–∞—è —É—Ç–∫–∞
                </button>
                <button class="btn" onclick="loadTestModel('fox')">
                    ü¶ä –õ–∏—Å–∏—Ü–∞
                </button>
            </div>
        </div>
        
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤–æ–µ–π –º–æ–¥–µ–ª–∏ -->
        <div class="file-upload">
            <h3>üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ—é –º–æ–¥–µ–ª—å</h3>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª .glb –∏–ª–∏ .gltf (–¥–æ 50 –ú–ë)</p>
            <input type="file" id="model-upload" accept=".glb,.gltf" style="margin: 15px 0;">
            <p style="font-size: 14px; color: #666;">
                –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç .glb - –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç—É—Ä—ã –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞
            </p>
        </div>
        
        <!-- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ -->
        <div class="troubleshooting">
            <h3>üîç –ü–æ—á–µ–º—É –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è:</h3>
            <ul>
                <li>–§–∞–π–ª –º–æ–¥–µ–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–æ 10 –ú–ë)</li>
                <li>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É</li>
                <li>–§–∞–π–ª –º–æ–¥–µ–ª–∏ –≤ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</li>
                <li>–ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ñ–∞–π–ª—É</li>
            </ul>
            <p style="margin-top: 15px;">
                <strong>–†–µ—à–µ–Ω–∏–µ:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –≤—ã—à–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            </p>
        </div>
    </div>

    <script>
        // –ì–æ—Ç–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
        const TEST_MODELS = {
            'duck': 'https://cdn.glitch.global/3b0b6a5a-5c5e-4b5e-8b0a-0e9d9b9b9b9b/Duck.glb',
            'fox': 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Fox/glTF-Binary/Fox.glb'
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const modelViewer = document.querySelector('#my-model-viewer');
        const loadingElement = document.getElementById('loading');
        const progressText = document.getElementById('progress-text');

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –º–æ–¥–µ–ª–∏
        function loadTestModel(modelName) {
            showLoading(`–ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å: ${modelName}`);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º src –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–µ–ª—å
            modelViewer.src = TEST_MODELS[modelName];
            modelViewer.style.display = 'block';
            
            console.log(`–ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å: ${TEST_MODELS[modelName]}`);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        function showLoading(message) {
            loadingElement.style.display = 'flex';
            progressText.textContent = message;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        function hideLoading() {
            loadingElement.style.display = 'none';
        }

        // –°–æ–±—ã—Ç–∏—è model-viewer
        modelViewer.addEventListener('load', () => {
            console.log('‚úÖ –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
            hideLoading();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            setTimeout(() => {
                alert('–ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –Ω–µ–π.');
            }, 500);
        });

        modelViewer.addEventListener('error', (event) => {
            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏:', event.detail);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω—É—é –æ—à–∏–±–∫—É
            loadingElement.innerHTML = `
                <div style="color: #e74c3c; font-size: 3rem;">‚ùå</div>
                <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏</h3>
                <p>${getErrorMessage(event.detail)}</p>
                <p style="margin-top: 20px;">
                    <button class="btn" onclick="loadTestModel('duck')" style="margin: 5px;">
                        –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å
                    </button>
                </p>
            `;
        });

        modelViewer.addEventListener('progress', (event) => {
            const progress = Math.floor(event.detail.totalProgress * 100);
            progressText.textContent = `–ó–∞–≥—Ä—É–∑–∫–∞: ${progress}%`;
            
            if (progress === 100) {
                progressText.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥–µ–ª–∏...';
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–Ω—è—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
        function getErrorMessage(errorCode) {
            const errors = {
                'fetch-failed': '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É.',
                'unsupported-format': '–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .glb –∏–ª–∏ .gltf.',
                'parse-failed': '–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –º–æ–¥–µ–ª–∏.',
                'timeout': '–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–µ–∫–ª–æ. –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π.',
                'unknown': '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏.'
            };
            return errors[errorCode] || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞';
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—å—é
        function toggleAutoRotate() {
            const isRotating = modelViewer.getAttribute('auto-rotate') === '';
            modelViewer.setAttribute('auto-rotate', !isRotating);
            
            document.getElementById('rotate-icon').textContent = isRotating ? '‚è∏Ô∏è' : 'üîÑ';
            document.getElementById('rotate-text').textContent = isRotating ? '–°—Ç–∞—Ä—Ç' : '–°—Ç–æ–ø';
        }

        function resetView() {
            modelViewer.cameraOrbit = '0deg 75deg 105%';
            modelViewer.fieldOfView = '30deg';
            modelViewer.jumpCameraToGoal();
        }

        function toggleShadow() {
            const currentShadow = modelViewer.getAttribute('shadow-intensity');
            const newShadow = currentShadow === '1' ? '0' : '1';
            modelViewer.setAttribute('shadow-intensity', newShadow);
            
            document.getElementById('shadow-icon').textContent = newShadow === '1' ? 'üåì' : '‚òÄÔ∏è';
            document.getElementById('shadow-text').textContent = newShadow === '1' ? '–¢–µ–Ω–∏' : '–ù–µ—Ç —Ç–µ–Ω–µ–π';
        }

        function changeEnvironment(env) {
            modelViewer.setAttribute('environment-image', env);
            const envNames = {
                'neutral': 'üèôÔ∏è –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ',
                'legacy': 'üèõÔ∏è –ö–ª–∞—Å—Å–∏–∫–∞',
                'spruit-sunrise': 'üåÖ –†–∞—Å—Å–≤–µ—Ç'
            };
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –≤—Å–µ—Ö –∫–Ω–æ–ø–∫–∞—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
            document.querySelectorAll('.btn').forEach(btn => {
                if (btn.textContent.includes('üèôÔ∏è') || btn.textContent.includes('üèõÔ∏è') || btn.textContent.includes('üåÖ')) {
                    const envKey = Object.keys(envNames).find(key => envNames[key] === btn.textContent);
                    if (envKey) {
                        btn.textContent = envNames[envKey];
                    }
                }
            });
        }

        function enterAR() {
            if (modelViewer.activateAR) {
                modelViewer.activateAR();
            } else {
                alert('AR –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
        document.getElementById('model-upload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.name.endsWith('.glb') && !file.name.endsWith('.gltf')) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª .glb –∏–ª–∏ .gltf');
                return;
            }
            
            if (file.size > 50 * 1024 * 1024) {
                alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50 –ú–ë');
                return;
            }
            
            showLoading(`–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à—É –º–æ–¥–µ–ª—å: ${file.name}`);
            
            // –°–æ–∑–¥–∞–µ–º URL –¥–ª—è —Ñ–∞–π–ª–∞
            const objectURL = URL.createObjectURL(file);
            modelViewer.src = objectURL;
            modelViewer.style.display = 'block';
            
            console.log(`–ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} –ú–ë)`);
        });

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –º–æ–¥–µ–ª–∏
        function downloadModel() {
            const link = document.createElement('a');
            link.href = TEST_MODELS.duck;
            link.download = 'test-model.glb';
            link.click();
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ 3D –º–æ–¥–µ–ª–µ–π');
            
            // –î–∞–µ–º 3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é, –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å
            setTimeout(() => {
                if (!modelViewer.src) {
                    loadTestModel('duck');
                }
            }, 3000);
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WebGL
        function checkWebGLSupport() {
            try {
                const canvas = document.createElement('canvas');
                return !!(window.WebGLRenderingContext && 
                         (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
            } catch (e) {
                return false;
            }
        }

        if (!checkWebGLSupport()) {
            loadingElement.innerHTML = `
                <div style="color: #e74c3c; font-size: 3rem;">‚ö†Ô∏è</div>
                <h3>WebGL –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</h3>
                <p>–í–∞—à –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebGL, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è 3D.</p>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:</p>
                <ul style="text-align: left; display: inline-block;">
                    <li>–û–±–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä</li>
                    <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Chrome, Firefox –∏–ª–∏ Edge</li>
                    <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∏</li>
                </ul>
            `;
        }
    </script>

    <div style="margin-top: 30px; color: white; text-align: center; padding: 20px;">
        <p>üéØ –ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ —Ñ–∞–π–ª index.html –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>
        <p style="font-size: 0.9rem; opacity: 0.8;">–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –º–æ–¥–µ–ª–∏</p>
    </div>
</body>
</html>
